<!DOCTYPE html>
<html>
  <head>
    <title>Hello World</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-02-16T13:41:21 AEDT">
<title>Goroutine &amp; Channel - 2 :: Hello World</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<meta name="description" content="Goroutine &amp; Channels - Part 2">



    
  </head>
  <body data-url="/coding/golang/go-note-7/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">Hello World</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
  <nav class="shortcuts">
    <div>
      <div class="searchbox">
        <input data-search-input id="search-by" type="text" placeholder="Search...">
      </div>
      <script type="text/javascript" src="/js/lunr.min.js"></script>
      <script type="text/javascript" src="/js/auto-complete.js"></script>
      <link href="/css/auto-complete.css" rel="stylesheet">
      <script type="text/javascript">
        
            var baseurl = "\/";
        
      </script>
      <script type="text/javascript" src="/js/search.js"></script>
    </div>
  </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/projects/" class="dd-item haschildren
        ">
      <div>
      <a href="/projects/">Projects</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/projects/python-flat-api/" class="dd-item">
        <div>
          <a href="/projects/python-flat-api/">
            FlatApi - Restful API for python dev
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/angular4-crm/" class="dd-item">
        <div>
          <a href="/projects/angular4-crm/">
            Angular 4 CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/laravel-mvc-starter/" class="dd-item">
        <div>
          <a href="/projects/laravel-mvc-starter/">
            Laravel MVC Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/react-crm/" class="dd-item">
        <div>
          <a href="/projects/react-crm/">
            React Redux CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/vue2-admin/" class="dd-item">
        <div>
          <a href="/projects/vue2-admin/">
            Vue 2 Admin Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/vue2-crm/" class="dd-item">
        <div>
          <a href="/projects/vue2-crm/">
            Vue 2 CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/angularjs-webpack-es6-starter/" class="dd-item">
        <div>
          <a href="/projects/angularjs-webpack-es6-starter/">
            Angularjs Webpack ES6 Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/zf2-mvc-starter/" class="dd-item">
        <div>
          <a href="/projects/zf2-mvc-starter/">
            Zend Framework 2 MVC Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/kube-cluster/" class="dd-item">
        <div>
          <a href="/projects/kube-cluster/">
            Kubernetes Cluster in 5min
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/coding/">Coding</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/coding/c/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/c/">C </a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/c/lcthw-lectures.1/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.1/">
            C Lecture - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.2/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.2/">
            C Lecture - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.3/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.3/">
            C Lecture - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.4/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.4/">
            C Lecture - 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/c-sharp/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/c-sharp/">C#</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/c-sharp/csharp-note-1/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-1/">
            C# Console App
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-4/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-4/">
             Generic Predicate &amp; Expression
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-2/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-2/">
            Scheduled task with window service
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-3/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-3/">
            Thread &amp; Task
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/db-sql/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/db-sql/">DB &amp; SQL</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/db-sql/mysql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-1/">
            MySql Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-2/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-2/">
            MySql Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-3/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-3/">
            MySql Note - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-4/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-4/">
            MySql Note - 4
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-5/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-5/">
            MySql Note - 5
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/pgsql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/pgsql-note-1/">
            PostgresQL Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mssql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mssql-note-1/">
            Sql Server Note - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/golang/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/coding/golang/">Golang</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/golang/go-note-1/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-1/">
            Getting started
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-2/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-2/">
            Map, Function &amp; Closure
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-3/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-3/">
            Struct &amp; Interface
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-4/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-4/">
            IO, Json &amp; XML
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-5/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-5/">
            Error handling
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-6/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-6/">
            Goroutine &amp; Channel - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-7/" class="dd-item active">
        <div>
          <a href="/coding/golang/go-note-7/">
            Goroutine &amp; Channel - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-8/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-8/">
            Packaging
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-9/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-9/">
            Pitfalls
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-10/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-10/">
            Template
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-20/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-20/">
            Good practice - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-21/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-21/">
            Good practice 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-22/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-22/">
            Good practice 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-99/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-99/">
            Golang snippets
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/java/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/java/">Java</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/java/java-note-1/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-1/">
            Java Note - 1: Enum
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-2/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-2/">
            Java Note - 2: Concurrency
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-3/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-3/">
            Java Note - 3: Path and Files
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-4/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-4/">
            Java Note - 4: Date Time 
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-5/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-5/">
            Java Note - 5: Lambda 
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/js-ts/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/js-ts/">JS &amp; TS </a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/js-ts/js-note-1/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-1/">
            JS &amp; ES Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-2/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-2/">
            JS &amp; ES Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-3/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-3/">
            JS &amp; ES Note - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-99/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-99/">
            JS &amp; ES snippet
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/ts-note-1/" class="dd-item">
        <div>
          <a href="/coding/js-ts/ts-note-1/">
            TypeScript Note - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/python/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/python/">Python</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/python/python-note-1/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-1/">
            Package &amp; Module
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-2/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-2/">
            Closure &amp; Decorator
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-3/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-3/">
            String &amp; Representation
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-4/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-4/">
            Iteration
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-5/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-5/">
            Inheritance &amp; Polymorphism
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-6/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-6/">
            Collection
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-7/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-7/">
            Exception &amp; Assertion
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-8/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-8/">
            Context
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-9/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-9/">
            ABC
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/rustlang/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/rustlang/">Rustlang</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/rustlang/rust-note-1/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-1/">
            Data Types &amp; Ownership
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-2/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-2/">
            Project, Vector, String &amp; Hashmap
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-3/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-3/">
            Error handling
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-4/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-4/">
            Generic Type &amp; Trait 
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/shell/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/shell/">Shell</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/shell/bash-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-1/">
            Adv Bash - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/bash-note-2/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-2/">
            Adv Bash - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/bash-note-3/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-3/">
            Adv Bash - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/cron-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/cron-note-1/">
            Cron Job Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/cron-note-2/" class="dd-item">
        <div>
          <a href="/coding/shell/cron-note-2/">
            Cron Job Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/ps-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/ps-note-1/">
            Powershell Note - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cloud/" class="dd-item haschildren
        ">
      <div>
      <a href="/cloud/">Cloud</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/cloud/aws-note-1/" class="dd-item">
        <div>
          <a href="/cloud/aws-note-1/">
            AWS Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws-note-2/" class="dd-item">
        <div>
          <a href="/cloud/aws-note-2/">
            AWS Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito-note-1/" class="dd-item">
        <div>
          <a href="/cloud/digito-note-1/">
            DigitialOcean Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito-note-2/" class="dd-item">
        <div>
          <a href="/cloud/digito-note-2/">
            DigitialOcean Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito-note-3/" class="dd-item">
        <div>
          <a href="/cloud/digito-note-3/">
            DigitialOcean Note - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito-note-4/" class="dd-item">
        <div>
          <a href="/cloud/digito-note-4/">
            DigitialOcean Note - 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/hacks/" class="dd-item haschildren
        ">
      <div>
      <a href="/hacks/">Hacks</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/hacks/git-notes/" class="dd-item">
        <div>
          <a href="/hacks/git-notes/">
            Git Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/windows-command-3/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-3/">
            Windows cmd &amp; hotkey - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/windows-command-2/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-2/">
            Windows cmd &amp; hotkey - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/windows-command-1/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-1/">
            Windows cmd &amp; hotkey - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/cass-note/" class="dd-item">
        <div>
          <a href="/hacks/cass-note/">
            Cassandra Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/php-debug/" class="dd-item">
        <div>
          <a href="/hacks/php-debug/">
            Debug PHP with Free IDE
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/qemu-notes/" class="dd-item">
        <div>
          <a href="/hacks/qemu-notes/">
            Qemu &amp; Virtual Machine
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/vbox-notes/" class="dd-item">
        <div>
          <a href="/hacks/vbox-notes/">
            VirtualBox Notes
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/os/" class="dd-item haschildren
        ">
      <div>
      <a href="/os/">OS</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
        </ul>
    </li>
    <li data-nav-id="/blogs/" class="dd-item haschildren
        ">
      <div>
      <a href="/blogs/">Blogs</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/blogs/k8s-on-vm/" class="dd-item">
        <div>
          <a href="/blogs/k8s-on-vm/">
            Try Minikube
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/vue-ng-react/" class="dd-item">
        <div>
          <a href="/blogs/vue-ng-react/">
            Angular vs React vs Vue
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/create-a-blog-on-github/" class="dd-item">
        <div>
          <a href="/blogs/create-a-blog-on-github/">
            Create a blog site on GitHub Pages
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/build-mobile-app/" class="dd-item">
        <div>
          <a href="/blogs/build-mobile-app/">
            Build mobile app with web tech
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/azure-notes/" class="dd-item">
        <div>
          <a href="/blogs/azure-notes/">
            Azure Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/javascript-oop/" class="dd-item">
        <div>
          <a href="/blogs/javascript-oop/">
            JavaScript and OOP
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/frameworks/" class="dd-item haschildren
        ">
      <div>
      <a href="/frameworks/">Frameworks</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/frameworks/cntk-notes-1/" class="dd-item">
        <div>
          <a href="/frameworks/cntk-notes-1/">
            CNTK Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/tensorflow-notes-1/" class="dd-item">
        <div>
          <a href="/frameworks/tensorflow-notes-1/">
            Tensorflow Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/tensorflow-notes-2/" class="dd-item">
        <div>
          <a href="/frameworks/tensorflow-notes-2/">
            Tensorflow Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/php-web/" class="dd-item">
        <div>
          <a href="/frameworks/php-web/">
            PHP Web Framework
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/python-django/" class="dd-item">
        <div>
          <a href="/frameworks/python-django/">
            Python Web Framework
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tut/" class="dd-item haschildren
        ">
      <div>
      <a href="/tut/">Tutorial</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/tut/docker/" class="dd-item">
        <div>
          <a href="/tut/docker/">
            Docker Tutorial
          </a>
        </div>
    </li>
      <li data-nav-id="/tut/javascript/" class="dd-item">
        <div>
          <a href="/tut/javascript/">
            JavaScript Tutorial
          </a>
        </div>
    </li>
      <li data-nav-id="/tut/kube/" class="dd-item">
        <div>
          <a href="/tut/kube/">
            Kubernetes Tutorial
          </a>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/projects/" >
   Projects</option>
    <option value="/coding/" >
   Coding</option> 
    <option value="/coding/c/" >
  - 
   C </option>
    <option value="/coding/c-sharp/" >
  - 
   C#</option>
    <option value="/coding/db-sql/" >
  - 
   DB &amp; SQL</option>
    <option value="/coding/golang/" >
  - 
   Golang</option> 
      <option value="/coding/golang/go-note-1/" >-- Getting started</option>
      <option value="/coding/golang/go-note-2/" >-- Map, Function &amp; Closure</option>
      <option value="/coding/golang/go-note-3/" >-- Struct &amp; Interface</option>
      <option value="/coding/golang/go-note-4/" >-- IO, Json &amp; XML</option>
      <option value="/coding/golang/go-note-5/" >-- Error handling</option>
      <option value="/coding/golang/go-note-6/" >-- Goroutine &amp; Channel - 1</option>
      <option value="/coding/golang/go-note-7/"  selected>-- Goroutine &amp; Channel - 2</option>
      <option value="/coding/golang/go-note-8/" >-- Packaging</option>
      <option value="/coding/golang/go-note-9/" >-- Pitfalls</option>
      <option value="/coding/golang/go-note-10/" >-- Template</option>
      <option value="/coding/golang/go-note-20/" >-- Good practice - 1</option>
      <option value="/coding/golang/go-note-21/" >-- Good practice 2</option>
      <option value="/coding/golang/go-note-22/" >-- Good practice 3</option>
      <option value="/coding/golang/go-note-99/" >-- Golang snippets</option>
  
    <option value="/coding/java/" >
  - 
   Java</option>
    <option value="/coding/js-ts/" >
  - 
   JS &amp; TS </option>
    <option value="/coding/python/" >
  - 
   Python</option>
    <option value="/coding/rustlang/" >
  - 
   Rustlang</option>
    <option value="/coding/shell/" >
  - 
   Shell</option>
  
    <option value="/cloud/" >
   Cloud</option>
    <option value="/hacks/" >
   Hacks</option>
    <option value="/os/" >
   OS</option>
    <option value="/blogs/" >
   Blogs</option>
    <option value="/frameworks/" >
   Frameworks</option>
    <option value="/tut/" >
   Tutorial</option>



        </select>
      </center>
    </div>


    


    
    
    
<div class="main-page">
    <div class="flex-item main-content">
            <h1>Goroutine &amp; Channel - 2</h1>
        <h3 id="channel-directionality">Channel directionality</h3>
<ul>
<li>
<p>A channel type may be annotated to specify that it may only send or only receive</p>
<pre><code>  var send_only chan&lt;- int // channel can only receive data
  var recv_only &lt;-chan int // channel can only send data
</code></pre>
</li>
<li>
<p>Receive-only channels ( &lt;-chan T ) cannot be closed, because closing a channel is intended as a way for a sender to signal that no more values will be sent to the channel, so it has no meaning for receive-only channels.</p>
</li>
</ul>
<h4 id="pipe--filter-pattern">Pipe &amp; Filter pattern</h4>
<ul>
<li>
<p>A goroutine channel process will processes what it receives from an input channel and sends this to an output channel</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">sendChan</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#a6e22e">receiveChan</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">string</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">processChannel</span>(<span style="color:#a6e22e">sendChan</span>, <span style="color:#a6e22e">receiveChan</span>)

}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">processChannel</span>(<span style="color:#a6e22e">in</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">out</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">string</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">inValue</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">in</span> {
        <span style="color:#a6e22e">result</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strconv</span>.<span style="color:#a6e22e">Itoa</span>(<span style="color:#a6e22e">inValue</span>) <span style="color:#75715e">// processing inValue
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">result</span>
    }
}
</code></pre></div></li>
<li>
<p>Prime number generator sample</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>() <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">2</span>; ; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
            <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span>
        }
    }()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ch</span>
}

<span style="color:#75715e">// Filter out input values divisible by prime, send rest to returned channel
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">in</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">prime</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
        <span style="color:#66d9ef">for</span> {
            <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">in</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">%</span><span style="color:#a6e22e">prime</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
                <span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span>
            }
        }
    }()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">out</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sieve</span>() <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
        <span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">generate</span>()
        <span style="color:#66d9ef">for</span> {
            <span style="color:#a6e22e">prime</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
            <span style="color:#a6e22e">ch</span> = <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">ch</span>, <span style="color:#a6e22e">prime</span>)
            <span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">prime</span>
        }
    }()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">out</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">primes</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sieve</span>()
    <span style="color:#66d9ef">for</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">primes</span>)
    }
}
</code></pre></div></li>
</ul>
<h5 id="goroutine-with-select">Goroutine with select</h5>
<ul>
<li>
<p>The select chooses which of the multiple communications listed by its cases can proceed. The default clause is optional; fall through behavior, like in the normal switch, is not permitted.</p>
<ul>
<li>It all are blocked, it waits until one can proceed.</li>
<li>If multiple can proceed, it chooses one at random.</li>
<li>When none of the channel operations can proceed and the default clause is present, then this is executed: the default is always runnable (that is: ready to execute).</li>
</ul>
</li>
<li>
<p>Using a send operation in a select statement with a default case guarantees that the send will be non-blocking! If there are no cases, the select blocks execution forever.</p>
</li>
<li>
<p>Sample 9</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GOMAXPROCS</span>(<span style="color:#ae81ff">2</span>) <span style="color:#75715e">// in goroutine_select2.go
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ch1</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#a6e22e">ch2</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">pump1</span>(<span style="color:#a6e22e">ch1</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">pump2</span>(<span style="color:#a6e22e">ch2</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">suck</span>(<span style="color:#a6e22e">ch1</span>, <span style="color:#a6e22e">ch2</span>)
    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">1e9</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">pump1</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; ; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
    }
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">pump2</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; ; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>
    }
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">suck</span>(<span style="color:#a6e22e">ch1</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">ch2</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
    <span style="color:#66d9ef">for</span> {
        <span style="color:#66d9ef">select</span> {
        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch1</span>:

            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Received on channel 1: %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch2</span>:
            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Received on channel 2: %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
        }
    }
}
</code></pre></div></li>
</ul>
<h5 id="timeout--ticker">Timeout &amp; Ticker</h5>
<ul>
<li>
<p>Ticker: a struct time.Ticker which is an object that repeatedly sends a time value on a contained channel C at a specified time interval</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Ticker</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">C</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Time</span> <span style="color:#75715e">// the channel on which the ticks are delivered.
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// contains filtered or unexported fields
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>A ticker is stopped with Stop(), use this in a defer statement.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ticker</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">NewTicker</span>(<span style="color:#a6e22e">updateInterval</span>)
<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">ticker</span>.<span style="color:#a6e22e">Stop</span>()
<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> {
    <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">u</span><span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ch1</span>:
        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">v</span><span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ch2</span>:
        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ticker</span>.<span style="color:#a6e22e">C</span>:
        <span style="color:#a6e22e">logState</span>(<span style="color:#a6e22e">status</span>) <span style="color:#75715e">// call some logging function logState
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">default</span>: <span style="color:#75715e">// no value ready to be received
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>Handy to use when you have to limit the rate of processing per unit time. The time.Tick() function with signature func Tick(d Duration) &lt;-chan Time is useful when you only need access to the return channel and don’t need to shutdown it.</p>
</li>
<li>
<p>Sample below is good use case for time.Tick function</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">rate_per_sec</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">dur</span> <span style="color:#a6e22e">Duration</span> = <span style="color:#ae81ff">1e9</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">rate_per_sec</span>
<span style="color:#a6e22e">chRate</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Tick</span>(<span style="color:#a6e22e">dur</span>) <span style="color:#75715e">// a tick every 1/10th of a second
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">req</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">requests</span> {
    <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">chRate</span> <span style="color:#75715e">// rate limit our Service.Method RPC calls
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Call</span>(<span style="color:#e6db74">&#34;Service.Method&#34;</span>, <span style="color:#a6e22e">req</span>, <span style="color:#f92672">...</span>) <span style="color:#75715e">// client.Call is RPC call
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>A Timer type looks exactly the same as a Ticker type (it is constructed with NewTimer(d but it sends the time only once, after a Duration d.</p>
</li>
<li>
<p>After Duration d the current time is sent on the returned channel; so this is equivalent to NewTimer(d).C; it resembles Tick(), but After() sends the time only once.</p>
</li>
<li>
<p>Sample of timer</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">tick</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Tick</span>(<span style="color:#ae81ff">1e8</span>)
    <span style="color:#a6e22e">boom</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">After</span>(<span style="color:#ae81ff">5e8</span>)
    <span style="color:#66d9ef">for</span> {
        <span style="color:#66d9ef">select</span> {
            <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">tick</span>:
                <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;tick.&#34;</span>)
            <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">boom</span>:
                <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;BOOM!&#34;</span>)
                <span style="color:#66d9ef">return</span>
            <span style="color:#66d9ef">default</span>:
                <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; .&#34;</span>)
                <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">5e7</span>)
        }
    }
}
</code></pre></div></li>
</ul>
<h3 id="generator">Generator</h3>
<h4 id="lazy-generator">Lazy generator</h4>
<ul>
<li>
<p>A generator is a function that returns the next value in a sequence each time the function is called.</p>
</li>
<li>
<p>It is a producer that only returns the next value, not the entire sequence; this is called lazy evaluation:only compute what you need at the moment, saving valuable resources (memory and CPU): it is a technology for the evaluation of expressions on demand.</p>
</li>
</ul>
<h5 id="basic-lazy-generator">Basic lazy generator</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">resume</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">integers</span>() <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">yield</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
    <span style="color:#a6e22e">count</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
        <span style="color:#66d9ef">for</span> {
            <span style="color:#a6e22e">yield</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">count</span>
            <span style="color:#a6e22e">count</span><span style="color:#f92672">++</span>
        }
    }()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">yield</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generateInteger</span>() <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">resume</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">resume</span> = <span style="color:#a6e22e">integers</span>()
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">generateInteger</span>()) <span style="color:#75715e">//=&gt; 0
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">generateInteger</span>()) <span style="color:#75715e">//=&gt; 1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">generateInteger</span>()) <span style="color:#75715e">//=&gt; 2
</span><span style="color:#75715e"></span>}
</code></pre></div><h5 id="generic-lazy-generator">Generic Lazy Generator</h5>
<ul>
<li>
<p>By making clever use of the empty interface, closures and higher order functions we can implement a generic builder BuildLazyEvaluator for the lazy evaluation function (this should best placed inside a utility package). The builder takes a function that has to be evaluated and an initial state as arguments and returns a function without arguments returning the desired value. The passed evaluation function has to calculate the next return value as well as the next state based on the state argument. Inside the builder a channel and a goroutine with an endless loop are created. The return values are passed to the channel from which they are fetched by the returned function for later usage. Each time a value is fetched the next one will be calculated.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Any</span> <span style="color:#66d9ef">interface</span>{}
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">EvalFunc</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">Any</span>) (<span style="color:#a6e22e">Any</span>, <span style="color:#a6e22e">Any</span>)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">evenFunc</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">state</span> <span style="color:#a6e22e">Any</span>) (<span style="color:#a6e22e">Any</span>, <span style="color:#a6e22e">Any</span>) {
        <span style="color:#a6e22e">oldSate</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">state</span>.(<span style="color:#66d9ef">int</span>)
        <span style="color:#a6e22e">newState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">oldSate</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">oldSate</span>, <span style="color:#a6e22e">newState</span>
    }
    <span style="color:#a6e22e">even</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">BuildLazyIntEvaluator</span>(<span style="color:#a6e22e">evenFunc</span>, <span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%vth even: %v\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">even</span>())
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BuildLazyEvaluator</span>(<span style="color:#a6e22e">evalFunc</span> <span style="color:#a6e22e">EvalFunc</span>, <span style="color:#a6e22e">initState</span> <span style="color:#a6e22e">Any</span>) <span style="color:#66d9ef">func</span>() <span style="color:#a6e22e">Any</span> {
    <span style="color:#a6e22e">retValChan</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Any</span>)
    <span style="color:#a6e22e">loopFunc</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>() {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">actState</span> <span style="color:#a6e22e">Any</span> = <span style="color:#a6e22e">initState</span>
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">retVal</span> <span style="color:#a6e22e">Any</span>
        <span style="color:#66d9ef">for</span> {
            <span style="color:#a6e22e">retVal</span>, <span style="color:#a6e22e">actState</span> = <span style="color:#a6e22e">evalFunc</span>(<span style="color:#a6e22e">actState</span>)
            <span style="color:#a6e22e">retValChan</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">retVal</span>
        }
    }
    <span style="color:#a6e22e">retFunc</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>() <span style="color:#a6e22e">Any</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">retValChan</span>
    }
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">loopFunc</span>()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">retFunc</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BuildLazyIntEvaluator</span>(<span style="color:#a6e22e">evalFunc</span> <span style="color:#a6e22e">EvalFunc</span>, <span style="color:#a6e22e">initState</span> <span style="color:#a6e22e">Any</span>) <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">evalFn</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">BuildLazyEvaluator</span>(<span style="color:#a6e22e">evalFunc</span>, <span style="color:#a6e22e">initState</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">evalFn</span>().(<span style="color:#66d9ef">int</span>)
    }
}
</code></pre></div></li>
</ul>
<h3 id="future">Future</h3>
<blockquote>
<p>A related idea is that of futures: sometimes you know you need to compute a value before you need to actually use the value. In this case, you can potentially start computing the value on another processor and have it ready when you need it.</p>
</blockquote>
<ul>
<li>
<p>Futures are easy to implement via closures and goroutines, the idea is similar to generators, except
a future needs only to return one value.</p>
</li>
<li>
<p>Matrix package will look like the code below</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// futures used internally
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">futureMatrix</span> <span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Matrix</span>;

<span style="color:#75715e">// API remains the same
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Inverse</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>) <span style="color:#a6e22e">Matrix</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">InverseAsync</span>(<span style="color:#a6e22e">promise</span>(<span style="color:#a6e22e">a</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Product</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>, <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">Matrix</span>) <span style="color:#a6e22e">Matrix</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ProductAsync</span>(<span style="color:#a6e22e">promise</span>(<span style="color:#a6e22e">a</span>), <span style="color:#a6e22e">promise</span>(<span style="color:#a6e22e">b</span>))
}

<span style="color:#75715e">// expose async version of the API
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">InverseAsync</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">futureMatrix</span>) <span style="color:#a6e22e">futureMatrix</span> {
    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">make</span> (<span style="color:#a6e22e">futureMatrix</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span> () { <span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">inverse</span>(<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">a</span>) } ()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ProductAsync</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">futureMatrix</span>) <span style="color:#a6e22e">futureMatrix</span> {
    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">make</span> (<span style="color:#a6e22e">futureMatrix</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span> () { <span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">product</span>(<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">a</span>) } ()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>
}

<span style="color:#75715e">// actual implementation is the same as before
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">product</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>, <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">Matrix</span>) <span style="color:#a6e22e">Matrix</span> {
    <span style="color:#f92672">...</span>.
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">inverse</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>) <span style="color:#a6e22e">Matrix</span> {
    <span style="color:#f92672">...</span>.
}

<span style="color:#75715e">// utility fxn: create a futureMatrix from a given matrix
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">promise</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>) <span style="color:#a6e22e">futureMatrix</span> {
    <span style="color:#a6e22e">future</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">make</span> (<span style="color:#a6e22e">futureMatrix</span>, <span style="color:#ae81ff">1</span>)
    <span style="color:#a6e22e">future</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">a</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">future</span>;
}
</code></pre></div></li>
<li>
<p>Use the matrix package</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">InverseProduct</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>, <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">Matrix</span>) {
    <span style="color:#a6e22e">a_inv</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Inverse</span>(<span style="color:#a6e22e">a</span>)
    <span style="color:#a6e22e">b_inv</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Inverse</span>(<span style="color:#a6e22e">b</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Product</span>(<span style="color:#a6e22e">a_inv</span>, <span style="color:#a6e22e">b_inv</span>)
}

<span style="color:#75715e">// async way
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">InverseProduct</span> (<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Matrix</span>, <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">Matrix</span>) {
    <span style="color:#a6e22e">a_inv_future</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">InverseAsync</span>(<span style="color:#a6e22e">a</span>);
    <span style="color:#a6e22e">b_inv_future</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">InverseAsync</span>(<span style="color:#a6e22e">b</span>);
    <span style="color:#a6e22e">a_inv</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">a_inv_future</span>;
    <span style="color:#a6e22e">b_inv</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">b_inv_future</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Product</span>(<span style="color:#a6e22e">a_inv</span>, <span style="color:#a6e22e">b_inv</span>);
}
</code></pre></div></li>
</ul>
<h4 id="multiplexing">Multiplexing</h4>
<ul>
<li>
<p>Client-server applications are the kind of applications where goroutines and channels shine.</p>
</li>
<li>
<p>Server side simulator sample</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Request</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>      <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">replyChan</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// reply channel inside the Request
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">binOp</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">run</span>(<span style="color:#a6e22e">op</span> <span style="color:#a6e22e">binOp</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) {
    <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">replyChan</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">op</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">b</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">server</span>(<span style="color:#a6e22e">op</span> <span style="color:#a6e22e">binOp</span>, <span style="color:#a6e22e">service</span> <span style="color:#66d9ef">chan</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">quitChan</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>) {
    <span style="color:#66d9ef">for</span> {
        <span style="color:#66d9ef">select</span> {
        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">req</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">service</span>:
            <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">run</span>(<span style="color:#a6e22e">op</span>, <span style="color:#a6e22e">req</span>)
        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">quitChan</span>:
            <span style="color:#66d9ef">return</span>
        }
    }
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">startServer</span>(<span style="color:#a6e22e">op</span> <span style="color:#a6e22e">binOp</span>) (<span style="color:#a6e22e">service</span> <span style="color:#66d9ef">chan</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">quitChan</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>) {
    <span style="color:#a6e22e">service</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
    <span style="color:#a6e22e">quitChan</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>)
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">server</span>(<span style="color:#a6e22e">op</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">quitChan</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">quitChan</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">adder</span>, <span style="color:#a6e22e">quitChan</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">startServer</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span> })
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">N</span> = <span style="color:#ae81ff">100</span>
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">reqs</span> [<span style="color:#a6e22e">N</span>]<span style="color:#a6e22e">Request</span>
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">req</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">reqs</span>[<span style="color:#a6e22e">i</span>]
        <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">i</span>
        <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">b</span> = <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">N</span>
        <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">replyChan</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
        <span style="color:#a6e22e">adder</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">req</span>
    }
    <span style="color:#75715e">// checks:
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">N</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> { <span style="color:#75715e">// doesn’t matter what order
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">reqs</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">replyChan</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">N</span><span style="color:#f92672">+</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">i</span> {
            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;fail at&#34;</span>, <span style="color:#a6e22e">i</span>)
        } <span style="color:#66d9ef">else</span> {

            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Request &#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#e6db74">&#34;is ok!&#34;</span>)
        }
    }
    <span style="color:#a6e22e">quitChan</span> <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">true</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;done&#34;</span>)
}
</code></pre></div></li>
</ul>
<h3 id="parallel-for-loop">Parallel For-Loop</h3>
<ul>
<li>
<p>In summary, we need a channel for synchronization purposes (used as a semaphore) when implementing a parallel for-loop, but we do not need to communicate with goroutine through channels when the stack works perfectly well.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">xi</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">float</span> <span style="color:#66d9ef">chan</span>);
<span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">float</span> <span style="color:#66d9ef">chan</span>);
<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>,<span style="color:#a6e22e">xi</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">data</span> {
    <span style="color:#a6e22e">xch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">float</span> <span style="color:#66d9ef">chan</span>);
    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span> () {
        <span style="color:#a6e22e">xi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">xch</span>;
        <span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">doSomething</span>(<span style="color:#a6e22e">xi</span>);
    }()
    <span style="color:#a6e22e">xch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">xi</span>;
}
</code></pre></div></li>
<li>
<p>Another sample of parallel-loop with semaphore</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">VectorScalarAdd</span> (<span style="color:#a6e22e">v</span> []<span style="color:#66d9ef">float</span>, <span style="color:#a6e22e">s</span> <span style="color:#66d9ef">float</span>) {
    <span style="color:#a6e22e">sem</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">make</span> (<span style="color:#a6e22e">semaphore</span>, len(<span style="color:#a6e22e">v</span>));
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>,<span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">v</span> {
        <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>) {
            <span style="color:#a6e22e">v</span> [<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+=</span> <span style="color:#a6e22e">s</span>; 
            <span style="color:#a6e22e">sem</span>.<span style="color:#a6e22e">Signal</span>();
        } (<span style="color:#a6e22e">i</span>);
    }()
    <span style="color:#a6e22e">sem</span>.<span style="color:#a6e22e">Wait</span>(len(<span style="color:#a6e22e">v</span>));
}
</code></pre></div></li>
</ul>
<h4 id="concurrent-access-to-object-with-channel">Concurrent access to object with channel.</h4>
<ul>
<li>
<p>To safeguard concurrent modifications of an object instead of using locking with a sync Mutex we can also use a backend goroutine for the sequential execution of anonymous functions.</p>
</li>
<li>
<p>In the following program we have a type Person which now contains a field chF, a channel of anonymous functions. This is initialized in the constructor-method NewPerson, which also starts a method backend() as a goroutine.This method executes in an infinite loop all the functions placed on chF, effectively serializing them and thus providing safe concurrent access. The methods that change and retrieve the salary make an anonymous function which does that and put this function on chF, and backend() will sequentially execute them.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Person</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Name</span>   <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">salary</span> <span style="color:#66d9ef">float64</span>
    <span style="color:#a6e22e">chF</span>    <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">func</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewPerson</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">salary</span> <span style="color:#66d9ef">float64</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">Person</span> {
    <span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Person</span>{<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">salary</span>, make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">func</span>())}
    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">backend</span>()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>
}
<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Person</span>) <span style="color:#a6e22e">backend</span>() {
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">chF</span> {
        <span style="color:#a6e22e">f</span>()
    }
}

<span style="color:#75715e">// Set salary.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Person</span>) <span style="color:#a6e22e">SetSalary</span>(<span style="color:#a6e22e">sal</span> <span style="color:#66d9ef">float64</span>) {
    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">chF</span> <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">func</span>() { <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">salary</span> = <span style="color:#a6e22e">sal</span> }
}

<span style="color:#75715e">// Retrieve salary.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Person</span>) <span style="color:#a6e22e">Salary</span>() <span style="color:#66d9ef">float64</span> {
    <span style="color:#a6e22e">fChan</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">float64</span>)
    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">chF</span> <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">func</span>() { <span style="color:#a6e22e">fChan</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">salary</span> }
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">fChan</span>
}
<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Person</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Person - name is: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Name</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; - salary is: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strconv</span>.<span style="color:#a6e22e">FormatFloat</span>(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Salary</span>(), <span style="color:#e6db74">&#39;f&#39;</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">64</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">bs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewPerson</span>(<span style="color:#e6db74">&#34;Smith Bill&#34;</span>, <span style="color:#ae81ff">2500.5</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">bs</span>)
    <span style="color:#a6e22e">bs</span>.<span style="color:#a6e22e">SetSalary</span>(<span style="color:#ae81ff">4000.25</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Salary changed:&#34;</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">bs</span>)
}
</code></pre></div></li>
</ul>

    </div>

    <div class="toc toc-fixed" >
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#channel-directionality">Channel directionality</a></li>
        <li><a href="#generator">Generator</a></li>
        <li><a href="#future">Future</a></li>
        <li><a href="#parallel-for-loop">Parallel For-Loop</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

</div>

    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/coding/golang/go-note-6/" title="Goroutine &amp; Channel - 1"> <i class="fa fa-chevron-left"></i><label>Goroutine &amp; Channel - 1</label></a>
    <a class="nav nav-next" href="/coding/golang/go-note-8/" title="Packaging" style="margin-right: 0px;"><label>Packaging</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>


<link href="/css/github.css" rel="stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>