<!DOCTYPE html>
<html>
  <head>
    <title>Hello World</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2021-12-21T17:30:55 AEDT">
<title>Goroutine &amp; Channel - 1 :: Hello World</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<meta name="description" content="Goroutine &amp; Channel - Part 1">



    
  </head>
  <body data-url="/coding/golang/go-note-6/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">Hello World</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
  <nav class="shortcuts">
    <div>
      <div class="searchbox">
        <input data-search-input id="search-by" type="text" placeholder="Search...">
      </div>
      <script type="text/javascript" src="/js/lunr.min.js"></script>
      <script type="text/javascript" src="/js/auto-complete.js"></script>
      <link href="/css/auto-complete.css" rel="stylesheet">
      <script type="text/javascript">
        
            var baseurl = "\/";
        
      </script>
      <script type="text/javascript" src="/js/search.js"></script>
    </div>
  </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/projects/" class="dd-item haschildren
        ">
      <div>
      <a href="/projects/">Projects</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/projects/angular-crm/" class="dd-item">
        <div>
          <a href="/projects/angular-crm/">
            Angular 9 CRM Starter Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/docker-toolkits/" class="dd-item">
        <div>
          <a href="/projects/docker-toolkits/">
             Docker Kits
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/python-flat-api/" class="dd-item">
        <div>
          <a href="/projects/python-flat-api/">
            FlatApi - Restful API for python dev
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/angular4-crm/" class="dd-item">
        <div>
          <a href="/projects/angular4-crm/">
            Angular 4 CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/laravel-mvc-starter/" class="dd-item">
        <div>
          <a href="/projects/laravel-mvc-starter/">
            Laravel MVC Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/react-crm/" class="dd-item">
        <div>
          <a href="/projects/react-crm/">
            React Redux CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/vue2-admin/" class="dd-item">
        <div>
          <a href="/projects/vue2-admin/">
            Vue 2 Admin Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/vue2-crm/" class="dd-item">
        <div>
          <a href="/projects/vue2-crm/">
            Vue 2 CRM Project
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/angularjs-webpack-es6-starter/" class="dd-item">
        <div>
          <a href="/projects/angularjs-webpack-es6-starter/">
            Angularjs Webpack ES6 Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/zf2-mvc-starter/" class="dd-item">
        <div>
          <a href="/projects/zf2-mvc-starter/">
            Zend Framework 2 MVC Starter
          </a>
        </div>
    </li>
      <li data-nav-id="/projects/kube-cluster/" class="dd-item">
        <div>
          <a href="/projects/kube-cluster/">
            Kubernetes Cluster in 5min
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/coding/">Coding</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/coding/c/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/c/">C </a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/c/lcthw-lectures.1/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.1/">
            C Lecture - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.2/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.2/">
            C Lecture - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.3/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.3/">
            C Lecture - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c/lcthw-lectures.4/" class="dd-item">
        <div>
          <a href="/coding/c/lcthw-lectures.4/">
            C Lecture - 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/c-sharp/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/c-sharp/">C#</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/c-sharp/csharp-note-1/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-1/">
            C# Console App
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-4/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-4/">
             Generic Predicate &amp; Expression
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-2/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-2/">
            Scheduled task with window service
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/c-sharp/csharp-note-3/" class="dd-item">
        <div>
          <a href="/coding/c-sharp/csharp-note-3/">
            Thread &amp; Task
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/db-sql/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/db-sql/">DB &amp; SQL</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/db-sql/mysql-note-2/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-2/">
            MySql: DDL
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-1/">
            MySql: Getting Started
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-5/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-5/">
            MySql: JSON
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-3/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-3/">
            MySql: SP &amp; Func
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mysql-note-4/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mysql-note-4/">
            MySql: Schema &amp; Metadata
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/pgsql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/pgsql-note-1/">
            PostgresQL Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/db-sql/mssql-note-1/" class="dd-item">
        <div>
          <a href="/coding/db-sql/mssql-note-1/">
            Sql Server Note - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/golang/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/coding/golang/">Golang</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/golang/go-note-1/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-1/">
            Getting started
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-2/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-2/">
            Map, Function &amp; Closure
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-3/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-3/">
            Struct &amp; Interface
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-4/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-4/">
            IO, Json &amp; XML
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-5/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-5/">
            Error handling
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-6/" class="dd-item active">
        <div>
          <a href="/coding/golang/go-note-6/">
            Goroutine &amp; Channel - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-7/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-7/">
            Goroutine &amp; Channel - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-8/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-8/">
            Packaging
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-9/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-9/">
            Pitfalls
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-10/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-10/">
            Template
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-20/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-20/">
            Good practice - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-21/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-21/">
            Good practice - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-22/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-22/">
            Good practice - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/golang/go-note-99/" class="dd-item">
        <div>
          <a href="/coding/golang/go-note-99/">
            Golang snippets
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/js-ts/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/js-ts/">JS &amp; TS </a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/js-ts/js-note-1/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-1/">
            JS &amp; ES Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-2/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-2/">
            JS &amp; ES Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-3/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-3/">
            JS &amp; ES Note - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/js-note-99/" class="dd-item">
        <div>
          <a href="/coding/js-ts/js-note-99/">
            JS &amp; ES snippet
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/js-ts/ts-note-1/" class="dd-item">
        <div>
          <a href="/coding/js-ts/ts-note-1/">
            TS: Basic Types
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/java/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/java/">Java</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/java/java-note-1/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-1/">
            Java Note - 1: Enum
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-2/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-2/">
            Java Note - 2: Concurrency
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-3/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-3/">
            Java Note - 3: Path and Files
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-4/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-4/">
            Java Note - 4: Date Time 
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/java/java-note-5/" class="dd-item">
        <div>
          <a href="/coding/java/java-note-5/">
            Java Note - 5: Lambda 
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/python/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/python/">Python</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/python/python-note-1/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-1/">
            Package &amp; Module
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-2/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-2/">
            Closure &amp; Decorator
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-3/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-3/">
            String &amp; Representation
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-4/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-4/">
            Iteration
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-5/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-5/">
            Inheritance &amp; Polymorphism
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-6/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-6/">
            Collection
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-7/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-7/">
            Exception &amp; Assertion
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-8/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-8/">
            Context
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/python/python-note-9/" class="dd-item">
        <div>
          <a href="/coding/python/python-note-9/">
            ABC
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/rustlang/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/rustlang/">Rustlang</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/rustlang/rust-note-1/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-1/">
            Data Types &amp; Ownership
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-2/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-2/">
            Project, Vector, String &amp; Hashmap
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-3/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-3/">
            Error handling
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/rustlang/rust-note-4/" class="dd-item">
        <div>
          <a href="/coding/rustlang/rust-note-4/">
            Generic Type &amp; Trait 
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/coding/shell/" class="dd-item haschildren
        ">
      <div>
      <a href="/coding/shell/">Shell</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/coding/shell/bash-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-1/">
            Adv Bash - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/bash-note-2/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-2/">
            Adv Bash - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/bash-note-3/" class="dd-item">
        <div>
          <a href="/coding/shell/bash-note-3/">
            Adv Bash - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/cron-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/cron-note-1/">
            Cron Job Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/cron-note-2/" class="dd-item">
        <div>
          <a href="/coding/shell/cron-note-2/">
            Cron Job Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/coding/shell/ps-note-1/" class="dd-item">
        <div>
          <a href="/coding/shell/ps-note-1/">
            Powershell Note - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cloud/" class="dd-item haschildren
        ">
      <div>
      <a href="/cloud/">Cloud</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/cloud/azure/" class="dd-item haschildren
        ">
      <div>
      <a href="/cloud/azure/">Azure</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/cloud/azure/az-01-caf-01/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-01-caf-01/">
            Azure: CAF - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/azure/az-01-caf-02/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-01-caf-02/">
            Azure: CAF - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/azure/az-01-caf-03/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-01-caf-03/">
            Azure: CAF - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/azure/az-02-rbac-01/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-02-rbac-01/">
            Azure: RBAC - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/azure/az-02-rbac-02/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-02-rbac-02/">
            Azure: RBAC - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/azure/az-02-rbac-03/" class="dd-item">
        <div>
          <a href="/cloud/azure/az-02-rbac-03/">
            Azure: RBAC - 3
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cloud/aws/" class="dd-item haschildren
        ">
      <div>
      <a href="/cloud/aws/">AWS</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/cloud/aws/aws-01-iam/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-01-iam/">
            AWS: IAM
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-02-cli-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-02-cli-1/">
            AWS : CLI - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-02-cli-2/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-02-cli-2/">
            AWS : CLI - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-02-cli-3/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-02-cli-3/">
            AWS : CLI - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-03-vpc-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-03-vpc-1/">
            AWS: VPC - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-03-vpc-2/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-03-vpc-2/">
            AWS: VPC - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-03-vpc-3/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-03-vpc-3/">
            AWS: VPC - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-03-vpc-4/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-03-vpc-4/">
            AWS: VPC - 4
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-03-vpc-5/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-03-vpc-5/">
            AWS: VPC - 5
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-04-s3-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-04-s3-1/">
            AWS: S3 - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-04-s3-2/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-04-s3-2/">
            AWS: S3 - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-04-s3-3/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-04-s3-3/">
            AWS: S3 - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-05-ses-sqs-sns-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-05-ses-sqs-sns-1/">
            AWS: SQS,SNS,SES - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-05-ses-sqs-sns-2/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-05-ses-sqs-sns-2/">
            AWS: SQS,SNS,SES - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-11-eks-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-11-eks-1/">
            AWS: EKS - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-11-eks-2/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-11-eks-2/">
            AWS: EKS - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-11-eks-3/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-11-eks-3/">
            AWS: EKS - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-11-eks-4/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-11-eks-4/">
            AWS: EKS - 4
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-11-eks-5/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-11-eks-5/">
            AWS: EKS - 5
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/aws/aws-21-rds-1/" class="dd-item">
        <div>
          <a href="/cloud/aws/aws-21-rds-1/">
            AWS: RDS - 1
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cloud/digito/" class="dd-item haschildren
        ">
      <div>
      <a href="/cloud/digito/">Digital Ocean</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/cloud/digito/digito-note-1/" class="dd-item">
        <div>
          <a href="/cloud/digito/digito-note-1/">
            DigitialOcean: Droplet
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito/digito-note-2/" class="dd-item">
        <div>
          <a href="/cloud/digito/digito-note-2/">
            DigitialOcean: Get Started
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito/digito-note-3/" class="dd-item">
        <div>
          <a href="/cloud/digito/digito-note-3/">
            DigitialOcean: First Web Host
          </a>
        </div>
    </li>
      <li data-nav-id="/cloud/digito/digito-note-4/" class="dd-item">
        <div>
          <a href="/cloud/digito/digito-note-4/">
            DigitialOcean: Lets Encrypt
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/hacks/" class="dd-item haschildren
        ">
      <div>
      <a href="/hacks/">Hacks</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/hacks/windows-command-1/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-1/">
            Windows cmd &amp; hotkey - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/windows-command-2/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-2/">
            Windows cmd &amp; hotkey - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/windows-command-3/" class="dd-item">
        <div>
          <a href="/hacks/windows-command-3/">
            Windows cmd &amp; hotkey - 3
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/sftp-pgp/" class="dd-item">
        <div>
          <a href="/hacks/sftp-pgp/">
            SFTP &amp; GPG 
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/git-notes/" class="dd-item">
        <div>
          <a href="/hacks/git-notes/">
            Git Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/cass-note/" class="dd-item">
        <div>
          <a href="/hacks/cass-note/">
            Cassandra Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/php-debug/" class="dd-item">
        <div>
          <a href="/hacks/php-debug/">
            Debug PHP with Free IDE
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/docker-note/" class="dd-item">
        <div>
          <a href="/hacks/docker-note/">
            Docker Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/qemu-notes/" class="dd-item">
        <div>
          <a href="/hacks/qemu-notes/">
            Qemu &amp; Virtual Machine
          </a>
        </div>
    </li>
      <li data-nav-id="/hacks/vbox-notes/" class="dd-item">
        <div>
          <a href="/hacks/vbox-notes/">
            VirtualBox Notes
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/management/" class="dd-item haschildren
        ">
      <div>
      <a href="/management/">Management</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/management/cmmi/" class="dd-item">
        <div>
          <a href="/management/cmmi/">
            CMMI
          </a>
        </div>
    </li>
      <li data-nav-id="/management/cmmi_v2/" class="dd-item">
        <div>
          <a href="/management/cmmi_v2/">
            CMMI 2.0
          </a>
        </div>
    </li>
      <li data-nav-id="/management/cobit_5/" class="dd-item">
        <div>
          <a href="/management/cobit_5/">
            COBIT 5
          </a>
        </div>
    </li>
      <li data-nav-id="/management/scrum_vs_kanban/" class="dd-item">
        <div>
          <a href="/management/scrum_vs_kanban/">
            Scrum VS Kanban
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/os/" class="dd-item haschildren
        ">
      <div>
      <a href="/os/">OS</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/os/amazon-linux-2/" class="dd-item">
        <div>
          <a href="/os/amazon-linux-2/">
            Amazon Linux 2 
          </a>
        </div>
    </li>
      <li data-nav-id="/os/vpn-strongswam/" class="dd-item">
        <div>
          <a href="/os/vpn-strongswam/">
            VPN StrongSwam setup
          </a>
        </div>
    </li>
      <li data-nav-id="/os/vpn-vyos/" class="dd-item">
        <div>
          <a href="/os/vpn-vyos/">
            VPN VyOS setup
          </a>
        </div>
    </li>
      <li data-nav-id="/os/dual-boot-win10-ubuntu18/" class="dd-item">
        <div>
          <a href="/os/dual-boot-win10-ubuntu18/">
            Dual Boot Windows 10 &amp; Ubuntu 18
          </a>
        </div>
    </li>
      <li data-nav-id="/os/ubuntu-desktop-18/" class="dd-item">
        <div>
          <a href="/os/ubuntu-desktop-18/">
            Ubuntu Desktop 18 LTS note
          </a>
        </div>
    </li>
      <li data-nav-id="/os/raspberrypi-notes/" class="dd-item">
        <div>
          <a href="/os/raspberrypi-notes/">
            Raspberry Pi setup
          </a>
        </div>
    </li>
      <li data-nav-id="/os/lubuntu16-desktop/" class="dd-item">
        <div>
          <a href="/os/lubuntu16-desktop/">
            Lubuntu 16 desktop
          </a>
        </div>
    </li>
      <li data-nav-id="/os/grub-trouble-shooting/" class="dd-item">
        <div>
          <a href="/os/grub-trouble-shooting/">
            Grub Trouble Shooting
          </a>
        </div>
    </li>
      <li data-nav-id="/os/ubuntu-server-16/" class="dd-item">
        <div>
          <a href="/os/ubuntu-server-16/">
            Ubuntu 16 server note
          </a>
        </div>
    </li>
      <li data-nav-id="/os/centos-server-7/" class="dd-item">
        <div>
          <a href="/os/centos-server-7/">
            CentOS 7 Server
          </a>
        </div>
    </li>
      <li data-nav-id="/os/ubuntu-server-14/" class="dd-item">
        <div>
          <a href="/os/ubuntu-server-14/">
            Ubuntu 14 -- server setup
          </a>
        </div>
    </li>
      <li data-nav-id="/os/ubuntu-desktop-14/" class="dd-item">
        <div>
          <a href="/os/ubuntu-desktop-14/">
            Ubuntu 14 -- desktop setup &amp; dual boot 
          </a>
        </div>
    </li>
      <li data-nav-id="/os/ubuntu-desktop-14-extra-tools/" class="dd-item">
        <div>
          <a href="/os/ubuntu-desktop-14-extra-tools/">
            Ubuntu 14 -- desktop, extra tools
          </a>
        </div>
    </li>
      <li data-nav-id="/os/mac-notes/" class="dd-item">
        <div>
          <a href="/os/mac-notes/">
            Macbook Notes - Intel X64
          </a>
        </div>
    </li>
      <li data-nav-id="/os/centos-fedora-desktop/" class="dd-item">
        <div>
          <a href="/os/centos-fedora-desktop/">
            CentOS 6/7 Multi-Boot Setup
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/blogs/" class="dd-item haschildren
        ">
      <div>
      <a href="/blogs/">Blogs</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/blogs/k8s-on-vm/" class="dd-item">
        <div>
          <a href="/blogs/k8s-on-vm/">
            Try Minikube
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/vue-ng-react/" class="dd-item">
        <div>
          <a href="/blogs/vue-ng-react/">
            Angular vs React vs Vue
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/create-a-blog-on-github/" class="dd-item">
        <div>
          <a href="/blogs/create-a-blog-on-github/">
            Create a blog site on GitHub Pages
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/build-mobile-app/" class="dd-item">
        <div>
          <a href="/blogs/build-mobile-app/">
            Build mobile app with web tech
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/azure-notes/" class="dd-item">
        <div>
          <a href="/blogs/azure-notes/">
            Azure Practices
          </a>
        </div>
    </li>
      <li data-nav-id="/blogs/javascript-oop/" class="dd-item">
        <div>
          <a href="/blogs/javascript-oop/">
            JavaScript and OOP
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/frameworks/" class="dd-item haschildren
        ">
      <div>
      <a href="/frameworks/">Frameworks</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/frameworks/cntk-notes-1/" class="dd-item">
        <div>
          <a href="/frameworks/cntk-notes-1/">
            CNTK Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/tensorflow-notes-1/" class="dd-item">
        <div>
          <a href="/frameworks/tensorflow-notes-1/">
            Tensorflow Note - 1
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/tensorflow-notes-2/" class="dd-item">
        <div>
          <a href="/frameworks/tensorflow-notes-2/">
            Tensorflow Note - 2
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/php-web/" class="dd-item">
        <div>
          <a href="/frameworks/php-web/">
            PHP Web Framework
          </a>
        </div>
    </li>
      <li data-nav-id="/frameworks/python-django/" class="dd-item">
        <div>
          <a href="/frameworks/python-django/">
            Python Web Framework
          </a>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/projects/" >
   Projects</option>
    <option value="/coding/" >
   Coding</option> 
    <option value="/coding/c/" >
  - 
   C </option>
    <option value="/coding/c-sharp/" >
  - 
   C#</option>
    <option value="/coding/db-sql/" >
  - 
   DB &amp; SQL</option>
    <option value="/coding/golang/" >
  - 
   Golang</option> 
      <option value="/coding/golang/go-note-1/" >-- Getting started</option>
      <option value="/coding/golang/go-note-2/" >-- Map, Function &amp; Closure</option>
      <option value="/coding/golang/go-note-3/" >-- Struct &amp; Interface</option>
      <option value="/coding/golang/go-note-4/" >-- IO, Json &amp; XML</option>
      <option value="/coding/golang/go-note-5/" >-- Error handling</option>
      <option value="/coding/golang/go-note-6/"  selected>-- Goroutine &amp; Channel - 1</option>
      <option value="/coding/golang/go-note-7/" >-- Goroutine &amp; Channel - 2</option>
      <option value="/coding/golang/go-note-8/" >-- Packaging</option>
      <option value="/coding/golang/go-note-9/" >-- Pitfalls</option>
      <option value="/coding/golang/go-note-10/" >-- Template</option>
      <option value="/coding/golang/go-note-20/" >-- Good practice - 1</option>
      <option value="/coding/golang/go-note-21/" >-- Good practice - 2</option>
      <option value="/coding/golang/go-note-22/" >-- Good practice - 3</option>
      <option value="/coding/golang/go-note-99/" >-- Golang snippets</option>
  
    <option value="/coding/js-ts/" >
  - 
   JS &amp; TS </option>
    <option value="/coding/java/" >
  - 
   Java</option>
    <option value="/coding/python/" >
  - 
   Python</option>
    <option value="/coding/rustlang/" >
  - 
   Rustlang</option>
    <option value="/coding/shell/" >
  - 
   Shell</option>
  
    <option value="/cloud/" >
   Cloud</option>
    <option value="/hacks/" >
   Hacks</option>
    <option value="/management/" >
   Management</option>
    <option value="/os/" >
   OS</option>
    <option value="/blogs/" >
   Blogs</option>
    <option value="/frameworks/" >
   Frameworks</option>



        </select>
      </center>
    </div>


    


    
    
    
<div class="main-page">
    <div class="flex-item main-content">
            <h1>Goroutine &amp; Channel - 1</h1>
        

<h3 id="goroutine">Goroutine</h3>

<ul>
<li><p>A goroutine is implemented as a function or method (this can also be an anonymous or lambda function) and called (invoked) with the keyword go. This starts the function running in parallel with the current computation but in the same address space and with its own stack.</p></li>

<li><p>Go’s concurrency primitives provide the basis for a good concurrency program design: expressing program structure so as to represent independently executing actions; so Go’s emphasis is not in the 1 st place on parallelism: concurrent programs may or may not be parallel. Parallelism is the ability to make things run quickly by using multiple processors. But it turns out most often that a well designed concurrent program also has excellent performing parallel capabilities.</p></li>
</ul>

<h4 id="basic-goroutine">Basic Goroutine</h4>

<ul>
<li>Sample 1: The code below will not print out anything, because the main exits before the &ldquo;hello&rdquo; goroutine kicks off. Actually the main is another goroutine which always runs first.</li>
</ul>

<pre><code class="language-go">func main() {
    go func() {
        println(&quot;Hello&quot;)
    }()
}
</code></pre>

<ul>
<li>Sample 2: Add timer to set main goroutine sleep a while, and let the &ldquo;hello&rdquo;
goroutine to start.</li>
</ul>

<pre><code class="language-go">func main() {
    go func() {
        println(&quot;Hello&quot;) // Hello
    }()
    time.Sleep(3000)
}
</code></pre>

<ul>
<li>Sample 3: The code below will print &ldquo;hello&rdquo; 10 times and then print &ldquo;world&rdquo; 10 times.</li>
</ul>

<pre><code class="language-go">func main() {
    go func() {
        for i := 0; i &lt; 10; i++ {
            println(&quot;Hello&quot;)
            time.Sleep(2000)
        }
    }()
    go func() {
        for i := 0; i &lt; 10; i++ {
            println(&quot;World&quot;)
        }
    }()
    time.Sleep(9999)
}
</code></pre>

<ul>
<li>Sample 4: The code below will print &ldquo;hello&rdquo; and &ldquo;world&rdquo; in different order.</li>
</ul>

<pre><code class="language-go">func main() {
    runtime.GOMAXPROCS(4)
    go func() {
        for i := 0; i &lt; 10; i++ {
            println(&quot;Hello&quot;)
            time.Sleep(500)
        }

    }()
    go func() {
        for i := 0; i &lt; 10; i++ {
            println(&quot;World&quot;)
            time.Sleep(500)
        }
    }()
    time.Sleep(999999)
}
</code></pre>

<ul>
<li>Sample 5: File watcher</li>
</ul>

<pre><code class="language-go">
const watchedPath = &quot;./source&quot;

func main() {
    for {
        d, _ := os.Open(watchedPath)
        files, _ := d.Readdir(-1)
        for _, fi := range files {
            filePath := watchedPath + &quot;/&quot; + fi.Name()
            f, _ := os.Open(filePath)
            data, _ := ioutil.ReadAll(f)
            f.Close()
            os.Remove(filePath)
            go func(data string) {
                reader := csv.NewReader(strings.NewReader(data))
                records, _ := reader.ReadAll()
                for _, r := range records {
                    invoice := new(Invoice)
                    invoice.Number = r[0]
                    invoice.Amount, _ = strconv.ParseFloat(r[1], 64)
                    invoice.PurchaseOrderNumber, _ = strconv.Atoi(r[2])
                    unixTime, _ := strconv.ParseInt(r[3], 10, 64)
                    invoice.InvoiceDate = time.Unix(unixTime, 0)
                    
                    fmt.Printf(&quot;Received Invoice '%v' for $%.2f and submitted for processing\n&quot;, invoice.Number, invoice.Amount)
                }
            }(string(data))
        }
        d.Close()
        time.Sleep(100 * time.Millisecond)
    }
}

type Invoice struct {
    Number string
    Amount float64
    PurchaseOrderNumber int
    InvoiceDate time.Time
}
</code></pre>

<h4 id="using-gomaxprocs">Using GOMAXPROCS</h4>

<ul>
<li><p>When GOMAXPROCS is greater than 1, they run on a thread pool with that many threads.With the gccgo compiler GOMAXPROCS is effectively equal to the number of running goroutines.</p></li>

<li><p>Observations from experiments: on a 1 CPU laptop performance improved when GOMAXPROCS was increased to 9. On a 32 core machine, the best performance was reached with GOMAXPROCS=8, a higher number didn’t increase performance in that benchmark.</p></li>
</ul>

<h3 id="channels">Channels</h3>

<h4 id="channels-for-communication-between-goroutines">Channels for communication between goroutines</h4>

<ul>
<li><p>Go has a special type, the channel, which is a like a conduit (pipe) through which you can send typed values and which takes care of communication between goroutines, avoiding all the pitfalls of shared memory; the very act of communication through a channel guarantees synchronization.</p></li>

<li><p>Data are passed around on channels: only one goroutine has access to a data item at any given time: so data races cannot occur, by design. The ownership of the data (that is the ability to read and write it) is passed around.</p></li>

<li><p>A channel is in fact a typed message queue: data can be transmitted through it. It is a First In First Out (FIFO) structure and so they preserve the order of the items that are sent into them (for those who are familiar with it, a channel can be compared to a two-way pipe in Unix shells).</p></li>

<li><p>A channel is also a reference type, so we have to use the make() function to allocate memory for it.</p></li>
</ul>

<p><strong>NOTE: Don’t use print statements to indicate the order of sending to and receiving from a channel: this could be out of order with what actually happens due to the time lag between the print statement and the actual channel sending and receiving.</strong></p>

<h4 id="blocking-of-channels">Blocking of channels</h4>

<ul>
<li><p>A send operation on a channel (and the goroutine or function that contains it) blocks until a receiver is available for the same channel</p></li>

<li><p>A receive operation for a channel blocks (and the goroutine or function that contains it) until a sender is available for the same channel</p></li>
</ul>

<h5 id="goroutine-sync-through-one-or-more-channels">Goroutine sync through one or more channels</h5>

<ul>
<li><p>Blocking - deadlock</p></li>

<li><p>Sample 1 :  deadlock because of lack of sender</p></li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string)
    fmt.Println(&lt;-ch)
}
//fatal error: all goroutines are asleep - deadlock!
</code></pre>

<ul>
<li>Sample 2: deadlock because of lack of receiver</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 1)
    ch &lt;- &quot;Hello&quot;
    
}
</code></pre>

<ul>
<li>Sample 3</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 1)
    ch &lt;- &quot;Hello&quot;
    fmt.Println(&lt;-ch) // Hello
}
</code></pre>

<h5 id="async-channels-channel-with-buffer">Async channels - channel with buffer</h5>

<ul>
<li>Channel with buffer</li>
</ul>

<pre><code class="language-go">buf := 100
ch1 := make(chan string, buf)
</code></pre>

<ul>
<li>Sample 4: deadlock again because the 2nd sender can not send message</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 1)
    ch &lt;- &quot;Hello&quot;
    ch &lt;- &quot;Hello&quot;
    fmt.Println(&lt;-ch)
    fmt.Println(&lt;-ch)
}
</code></pre>

<ul>
<li>Sample 5</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 2)
    ch &lt;- &quot;Hello&quot;
    ch &lt;- &quot;Hello&quot;
    fmt.Println(&lt;-ch) //Hello
    fmt.Println(&lt;-ch) // Hello
}
</code></pre>

<h5 id="closing-channel">Closing channel</h5>

<ul>
<li>Sample 6: Closing channel will not impact the receiver to get the message</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 1)
    ch &lt;- &quot;Hello&quot;
    ch &lt;- &quot;Hello&quot;
    fmt.Println(&lt;-ch)
    fmt.Println(&lt;-ch)
}
</code></pre>

<ul>
<li>Sample 7: Sender cannot send message to closing channel</li>
</ul>

<pre><code class="language-go">func main() {
    ch := make(chan string, 2)
    ch &lt;- &quot;Hello&quot;
    ch &lt;- &quot;Hello&quot;
    fmt.Println(&lt;-ch) //Hello
    fmt.Println(&lt;-ch) // Hello
    ch &lt;- &quot;Hello&quot; // panic: send on closed channel
}
</code></pre>

<h4 id="semaphore-pattern">Semaphore pattern</h4>

<ul>
<li>The goroutine compute signals its completion by putting a value on the channel ch, the main routine waits on &lt;-ch until this value gets through.</li>
</ul>

<pre><code class="language-go">func compute(ch chan int) {
    ch &lt;- someComputation()
    // when it completes, signal on the channel.
}

func main() {
    ch := make(chan int) // allocate a channel.
    go compute(ch)       // start something in a goroutine
    doSomethingElseForAWhile()
    result := &lt;-ch
}
</code></pre>

<h5 id="implement-a-semaphore-with-a-buffered-channel">Implement a semaphore with a buffered channel</h5>

<ul>
<li><p>There is no semaphore implementation in Go’s sync package, but they can be emulated easily using a buffered channel:</p>

<ul>
<li>the buffered channel is the number of resources we wish to synchronize</li>
<li>the length (number of elements currently stored) of the channel is the number of resources currently being used.</li>
<li>the capacity minus the length of the channel is the number of free resources (the integer value of traditional semaphores)</li>
</ul></li>

<li><p>Sample 8: semaphore pattern</p></li>
</ul>

<pre><code class="language-go">type Empty interface {}
var empty Empty
//  do sth ...
data := make([]float64, N)
res := make([]float64, N)
sem := make(chan Empty, N) // semaphore
// do sth  ...
for i, xi := range data {
    go func (i int, xi float64) {
        res[i] = doSomething(i,xi)
        sem &lt;- empty
    } (i, xi)
}
// wait for goroutines to finish
for i := 0; i &lt; N; i++ { &lt;-sem }

</code></pre>

<ul>
<li>Semaphore operations sample pattern</li>
</ul>

<pre><code class="language-go">// acquire n resources
func (s semaphore) P(n int) {
    e := new(Empty)
    for i := 0; i &lt; n; i++ {
        s &lt;- e
    }
}
// release n resources
func (s semaphore) V(n int) {
    for i := 0; i &lt; n; i++ {
        &lt;-s
    }
}
</code></pre>

<ul>
<li>Semaphore for a mutex:</li>
</ul>

<pre><code class="language-go">/* mutexes */
func (s semaphore) Lock() {
    s.P(1)
}
func (s semaphore) Unlock() {
    s.V(1)
}
/* signal-wait */
func (s semaphore) Wait(n int) {
    s.P(n)
}
func (s semaphore) Signal() {
    s.V(1)
}
</code></pre>

<h4 id="channel-factory-pattern">Channel Factory pattern</h4>

<ul>
<li>Another pattern common in this style of programming goes as follows: instead of passing a channel as a parameter to a goroutine, let the function make the channel and return it (so it plays the role of a factory); inside the function a lambda function is called as a goroutine.</li>
</ul>

<pre><code class="language-go">func main() {
    stream := pump()
    go suck(stream)
    // the above 2 lines can be shortened to: go suck( pump() )
    time.Sleep(1e9)
}
func pump() chan int {
    ch := make(chan int)
    go func() {
        for i := 0; ; i++ {
            ch &lt;- i
        }
    }()
    return ch
}
func suck(ch chan int) {
    for {
        fmt.Println(&lt;-ch)
    }
}
</code></pre>

<h5 id="for-range-applied-to-channels">For—range applied to channels</h5>

<ul>
<li><p>The range clause on for loops accepts a channel ch as an operand, in which case the for loops over the values received from the channel.</p></li>

<li><p>Obviously another goroutine must be writing to ch (otherwise the execution blocks in the for-loop) and must close ch when it is done writing.</p></li>
</ul>

<pre><code class="language-go">
func main() {
    suck(pump())
    time.Sleep(1e9)
}
func pump() chan int {
    ch := make(chan int)
    go func() {
        for i := 0; ; i++ {
            ch &lt;- i
        }
    }()
    return ch
}
func suck(ch chan int) {
    go func() {
        for v := range ch {
            fmt.Println(v)
        }
    }()
}
</code></pre>

<ul>
<li></li>
</ul>

<h5 id="iterator-pattern">Iterator pattern</h5>

<ul>
<li><p>Another common case where we have to populate a channel with the items of a container type which contains an index-addressable field items . For this we can define a method which returns a read-only channel.</p></li>

<li><p>Inside the goroutine, a for-loop iterates over the elements in the container c (for tree or graph algorithms, this simple for-loop could be replaced with a depth-first search)</p>

<pre><code class="language-go">func (c *container) Iter() &lt;-chan items {
    ch := make(chan item)
    go func() {
        for i := 0; i &lt; c.Len(); i++ {
            // or use a for-range loop
            ch &lt;- c.items[i]
        }
    }()
    return ch
}

// The code which calls this method can then iterate over the container
for x := range container.Iter() { ... }

</code></pre></li>
</ul>

<h4 id="producer-consumer-pattern">Producer Consumer pattern</h4>

<ul>
<li><p>A Produce() function which delivers the values needed by a Consume function. Both could be run as a separate goroutine, Produce putting the values on a channel which is read by Consume.</p>

<pre><code class="language-go">package main
/* producer-consumer problem in Go */

import (&quot;fmt&quot;)

var done = make(chan bool)
var msgs = make(chan int)

func produce () {
    for i := 0; i &lt; 10; i++ {
        msgs &lt;- i
    }
    done &lt;- true
}

func consume () {
    for {
        msg := &lt;-msgs
        fmt.Println(msg)
    }
}

func main () {
    go produce()
    go consume()
    &lt;- done
}
</code></pre></li>
</ul>

    </div>

    <div class="toc toc-fixed" >
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#goroutine">Goroutine</a>
<ul>
<li><a href="#basic-goroutine">Basic Goroutine</a></li>
<li><a href="#using-gomaxprocs">Using GOMAXPROCS</a></li>
</ul></li>
<li><a href="#channels">Channels</a>
<ul>
<li><a href="#channels-for-communication-between-goroutines">Channels for communication between goroutines</a></li>
<li><a href="#blocking-of-channels">Blocking of channels</a>
<ul>
<li><a href="#goroutine-sync-through-one-or-more-channels">Goroutine sync through one or more channels</a></li>
<li><a href="#async-channels-channel-with-buffer">Async channels - channel with buffer</a></li>
<li><a href="#closing-channel">Closing channel</a></li>
</ul></li>
<li><a href="#semaphore-pattern">Semaphore pattern</a>
<ul>
<li><a href="#implement-a-semaphore-with-a-buffered-channel">Implement a semaphore with a buffered channel</a></li>
</ul></li>
<li><a href="#channel-factory-pattern">Channel Factory pattern</a>
<ul>
<li><a href="#for-range-applied-to-channels">For—range applied to channels</a></li>
<li><a href="#iterator-pattern">Iterator pattern</a></li>
</ul></li>
<li><a href="#producer-consumer-pattern">Producer Consumer pattern</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>

</div>

    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/coding/golang/go-note-5/" title="Error handling"> <i class="fa fa-chevron-left"></i><label>Error handling</label></a>
    <a class="nav nav-next" href="/coding/golang/go-note-7/" title="Goroutine &amp; Channel - 2" style="margin-right: 0px;"><label>Goroutine &amp; Channel - 2</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>


<link href="/css/github.css" rel="stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>